---
title: "📘 YARN(Yet Another Resource Negotiator) 기본 이론"
tags:
    - Apache
    - Hadoop
    - Study
date: "2025-03-29"
thumbnail: "/assets/img/thumbnail/hadoop_basic_5.png"
bookmark: true
---

저번 포스팅에서는, 하둡의 핵심을 공부하였습니다.
이번에는 Hadoop V2 의 핵심인 YARN 에 대하여 공부한 내용을 포스팅 하도록 하겠습니다.

[📘 분산 시스템의 이해와 하둡의 등장 배경](https://jeondaehong.github.io/%F0%9F%93%96%20%EA%B0%9C%EC%9D%B8%20%EA%B3%B5%EB%B6%80/%F0%9F%91%89%20Apache%20Hadoop/1.%20%EB%B6%84%EC%82%B0%20%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98%20%EC%9D%B4%ED%95%B4%EC%99%80%20%ED%95%98%EB%91%A1%EC%9D%98%20%EB%93%B1%EC%9E%A5%20%EB%B0%B0%EA%B2%BD.html)
[📘 하둡의 핵심 구성요소와 이론](https://jeondaehong.github.io/%F0%9F%93%96%20%EA%B0%9C%EC%9D%B8%20%EA%B3%B5%EB%B6%80/%F0%9F%91%89%20Apache%20Hadoop/2.%20%ED%95%98%EB%91%A1%EC%9D%98%20%ED%95%B5%EC%8B%AC%20%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C%EC%99%80%20%EC%9D%B4%EB%A1%A0.html)

<br>
<div align="center">◈</div>
<br>

# 🐘 1. YARN

2012년 이전, Hadoop을 이용해 대용량 처리를 하려면 MapReduce 모델을 기반으로 Java, Python, Ruby, 혹은 Pig 프레임워크를 사용해 개발해야 했습니다.  

하지만 Hadoop 2.0과 함께 등장한 Yarn은 MapReduce 프로그래밍 모델의 제약에서 벗어나, 다양한 멀티프로세싱 프로그램을 Hadoop 자원을 활용해 자유롭게 실행할 수 있게 해주었습니다.  

Yarn은 대용량 멀티프로세싱 처리에서 성능 향상과 유연한 실행 엔진(execution engine)을 제공한다는 점이 큰 장점입니다.

또한, 시간이 지나면서 Spark와 같은 다양한 분산 처리 프레임워크도 Yarn을 지원하게 되면서, 하둡 생태계에서 필수적인 리소스 관리 플랫폼으로 자리잡았습니다.

이러한 **YARN** 에 대하여, 지금부터 공부하고, 정리한 내용을 포스팅 해보도록 하겠습니다.

## 🐘 1.1. YARN 이란
---

<img src="/assets/img/yarn.png" alt="yarn" style="border: 2px solid skyblue; border-radius: 4px;" />

> 출처 : [YARN](https://bigdataschool.ru/blog/high-availability-of-hadoop-cluster-with-yarn.html)

<br>
Yarn은 Hadoop 2.0부터 도입된 클러스터 자원 관리 시스템(Resource Manager)입니다. 
이전 Hadoop 버전에서는 MapReduce라는 특정 프로그래밍 모델에만 의존해서 작업을 처리했는데, Yarn이 도입되면서 MapReduce에 국한되지 않고 다양한 종류의 분산 처리 작업을 실행할 수 있게 되었습니다.  

Yarn의 주요 역할은 클러스터 내 여러 노드의 자원을 효율적으로 관리하고 할당하여, 여러 애플리케이션이 동시에 안정적으로 실행될 수 있도록 조율하는 것입니다.  
즉, 여러 사용자가 다양한 작업을 동시에 실행해도 자원이 과도하게 집중되거나 낭비되지 않고, 적절하게 분배되어 전체 시스템의 효율성과 안정성을 높입니다.

Yarn은 또한 실행 환경을 유연하게 제공하여, Apache Spark, Flink, Tez 같은 다양한 분산 처리 프레임워크도 지원합니다.
이로 인해 빅데이터 처리의 범위가 단순한 배치 작업에서 실시간 스트리밍, 머신러닝, 그래프 처리 등으로 확장될 수 있었습니다.

<br>
### 🐘 1.1.1. Yarn의 대표적인 Use-Cases

Yarn이 등장하면서 Hadoop 기반 클러스터는 다음과 같은 장점과 가능성을 갖게 되었습니다:

- **🔍 배치 작업뿐 아니라 반복 작업과 실시간 스트리밍 처리 지원**  
  과거 Hadoop은 일괄 처리(batch processing)에 초점이 맞춰져 있었으나, Yarn 덕분에 지속적으로 데이터를 처리하는 스트리밍 작업과 주기적으로 반복 실행되는 작업들도 효율적으로 수행할 수 있게 되었습니다.  
  예를 들어, 실시간 로그 분석, 실시간 추천 시스템 등 웹 서비스에 필요한 빠른 데이터 처리가 가능해졌습니다.

- **🔍 클러스터 자원 활용률 극대화**  
  클러스터 내 자원을 한 애플리케이션이 모두 사용하지 않을 때, Yarn이 자원을 다른 애플리케이션에 재할당해 줌으로써 자원 활용률을 크게 향상시켰습니다.  
  이는 비용 절감과 클러스터 운영 효율을 높이는 데 중요한 역할을 합니다.

- **🔍 통합 클러스터 운영**  
  데이터 저장(HDFS), 데이터 처리(MapReduce, Spark 등), 데이터 조회 등 다양한 작업을 단일 클러스터에서 함께 처리할 수 있어 운영 관리가 간편해졌고, 데이터 이동에 필요한 시간과 비용도 줄일 수 있었습니다.

- **🔍 다양한 애플리케이션 동시 실행 지원**  
  한 클러스터에서 여러 종류의 애플리케이션이 동시에 안정적으로 실행되어, 여러 팀이나 서비스가 하나의 클러스터를 공유할 수 있습니다.
  
<br>
### 🐘 1.1.2. Container 란?

Docker 를 사용해보신 분들이라면, Container 의 개념을 어느정도 알고 계실 것입니다.

컨테이너는 소프트웨어 실행 환경을 하나의 패키지로 묶은 경량화된 가상화 기술입니다.  
여기에는 애플리케이션이 동작하는 데 필요한 코드, 라이브러리, 설정 파일 등이 포함되어 있어, 어디서든 동일한 환경에서 실행할 수 있습니다.

컨테이너 기술은 리눅스의 cgroup과 namespace 같은 기능을 활용하여, 하나의 물리적 서버 내에서도 각각의 컨테이너가 독립적으로 CPU, 메모리, 네트워크 자원을 사용할 수 있도록 격리합니다.  
이 격리 덕분에 서로 다른 컨테이너가 충돌하거나 간섭하지 않고, 안정적으로 동시에 실행될 수 있습니다.

컨테이너를 사용하는 주요 이유와 장점은 다음과 같습니다

- **📦 책임 분리(Separation of responsibility)**  
  개발자는 애플리케이션 코드와 그에 필요한 의존성만 신경 쓰면 되고, 배포 환경의 세부 사항(운영체제 버전, 라이브러리 충돌 등)은 크게 신경 쓸 필요가 없습니다.  
  덕분에 개발과 운영 간 협업이 원활해지고, 배포 및 테스트 과정에서 환경 문제로 인한 오류가 줄어듭니다.

- **📦 높은 이식성(Portability)**  
  컨테이너는 운영체제 수준에서 가상화되므로, 리눅스 기반 서버라면 어느 환경에서든 동일하게 실행할 수 있습니다.  
  단, 컨테이너가 정상적으로 작동하려면 해당 시스템이 컨테이너 실행을 지원해야 하며, 일반적으로 Linux/amd64 아키텍처에서 가장 원활합니다.

- **📦 애플리케이션 격리(Application isolation)**  
  컨테이너마다 CPU, 메모리, 스토리지, 네트워크 같은 자원을 할당하고 제한할 수 있기 때문에, 하나의 서버에서 여러 컨테이너가 동시에 실행되어도 서로 간섭 없이 안정적으로 작동합니다.  
  이는 시스템 안정성과 보안성을 높이는 데도 도움이 됩니다.

최근에는 **Kubernetes** 같은 오케스트레이션 도구와 함께 컨테이너를 사용해, 대규모 분산 시스템을 효율적으로 운영하는 사례가 많아지고 있습니다.  

**Yarn**도 이런 컨테이너 개념을 차용해 클러스터 자원 관리에 적용함으로써, 더욱 세밀하고 유연한 자원 할당과 작업 관리를 가능하게 합니다.


## 🐘 1.2. YARN 아키텍처
---

<img src="/assets/img/yarn2.png" alt="HDFS_and_YARN" style="border: 2px solid skyblue; border-radius: 4px;" />

> 출처 : [YARN 과 HDFS](https://seoyeonhwng.medium.com/hadoop-yarn-%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-3f209e901b3a)

<br>
Yarn 과 HDFS 자체는 완전히 독립적입니다.

Yarn은 CPU, 메모리와 같은 컴퓨팅 자원을 할당하고 관리하는 **자원 관리 소프트웨어**입니다.반면, HDFS는 분산 파일 시스템으로 **데이터 저장(스토리지)** 역할만 수행합니다. 따라서 **Yarn과 HDFS는 완전히 독립적인 시스템**이며, 서로 다른 역할을 맡고 있습니다. 

즉, Yarn은 저장소와 관계없이 클러스터의 컴퓨팅 자원 관리에 집중합니다.

그러한 Yarn 의 Architecture 는 크게 3가지 역할을 하는 컴포넌트로 구성 되어있습니다.

 - **Resource Manager:** 클러스터 전체 자원 관리 및 스케줄링

 - **Application Master:** 개별 애플리케이션의 자원 요청 및 관리

 - **Node Managers:** 각 노드에서 자원 할당 및 작업 실행

<img src="/assets/img/yarn.png" alt="yarn" style="border: 2px solid skyblue; border-radius: 4px;" />

> 출처 : [YARN 아키텍처](https://blog.51cto.com/u_16099238/7038896)

<br>
그럼 YARN 의 기본과 핵심 아키텍처를 하나하나 알아보도록 하겠습니다.

<br>

### 🐘 1.2.1. Resource Mananger

### 🐘 1.2.2. Application Mananger

### 🐘 1.2.3. Node Manager


## 🐘 1.3. YARN 의 작업 흐름
---

### 🐘 1.3.1. High Level Workflow

### 🐘 1.3.2. Application 실행 요청

### 🐘 1.3.3. Application Master 실행 요청

### 🐘 1.3.4. Application Master 등록

### 🐘 1.3.5. 컨테이너 실행

### 🐘 1.3.6. Application Master 종료

### 🐘 1.3.7. Auxiliary Service

<br>
<br>
<div align="center">◈</div>
<br>

# 🐘 2. YARN TimeLine Service V2

<br>
<br>
<div align="center">◈</div>
<br>

# ✏️ 결론

<br>
<br>
<div align="center">◈</div>
<br>

# 📚 공부 참고 자료